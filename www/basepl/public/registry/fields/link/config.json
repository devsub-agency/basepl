{
  "name": "config",
  "type": "templates/fields",
  "files": {
    "path": "fields/link/config.ts",
    "type": "templates/fields",
    "content": "import type { Field, TextFieldSingleValidation } from 'payload'\r\n\r\nexport const link = ({ fieldIsLocalized = false }) => {\r\n  const linkconfig: Field = {\r\n    name: 'link',\r\n    type: 'group',\r\n    interfaceName: 'LinkType',\r\n    localized: fieldIsLocalized,\r\n    admin: {\r\n      hideGutter: true,\r\n    },\r\n    fields: [\r\n      {\r\n        type: 'row',\r\n        fields: [\r\n          {\r\n            name: 'label',\r\n            type: 'text',\r\n            maxLength: 30,\r\n            required: true,\r\n            admin: { width: '50%' },\r\n          },\r\n          {\r\n            name: 'targetType',\r\n            type: 'select',\r\n            required: true,\r\n            admin: { width: '50%' },\r\n            defaultValue: 'page',\r\n            options: [\r\n              { label: 'Page', value: 'page' },\r\n              { label: 'File Download', value: 'file' },\r\n              { label: 'External URL', value: 'external' },\r\n              { label: 'Email Address', value: 'email' },\r\n            ],\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        type: 'row',\r\n        fields: [\r\n          {\r\n            name: 'isOpenNewTab',\r\n            type: 'checkbox',\r\n            label: 'Open in new tab',\r\n            defaultValue: true,\r\n            admin: {\r\n              width: '25%',\r\n              condition: (_, sibling) => sibling?.targetType === 'external',\r\n            },\r\n          },\r\n          {\r\n            name: 'hasNoReferrer',\r\n            type: 'checkbox',\r\n            label: 'No referrer',\r\n            defaultValue: false,\r\n            admin: {\r\n              width: '25%',\r\n              condition: (_, sibling) => sibling?.targetType === 'external',\r\n            },\r\n          },\r\n          {\r\n            name: 'useSlug',\r\n            type: 'checkbox',\r\n            label: 'Use Slug instead',\r\n            admin: {\r\n              condition: (_, sibling) => sibling?.targetType === 'page',\r\n            },\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        name: 'externalUrl',\r\n        type: 'text',\r\n        required: true,\r\n        admin: {\r\n          width: '100%',\r\n          condition: (_, sibling) => sibling?.targetType === 'external',\r\n        },\r\n      },\r\n      {\r\n        name: 'emailAddress',\r\n        type: 'text',\r\n        required: true,\r\n        validate: ((value: string) => {\r\n          const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/\r\n          return emailRegex.test(value) || 'Please enter a valid email address'\r\n        }) as TextFieldSingleValidation,\r\n        admin: {\r\n          width: '100%',\r\n          condition: (data, sibling) => sibling?.targetType === 'email',\r\n        },\r\n      },\r\n\r\n      {\r\n        name: 'slug',\r\n        type: 'text',\r\n        required: true,\r\n        admin: {\r\n          width: '100%',\r\n          condition: (data, sibling) => sibling?.targetType === 'page' && sibling?.useSlug === true,\r\n        },\r\n      },\r\n      {\r\n        name: 'pageReference',\r\n        type: 'relationship',\r\n        relationTo: ['posts'],\r\n        required: true,\r\n        admin: {\r\n          width: '100%',\r\n          condition: (data, sibling) => sibling?.targetType === 'page' && !sibling?.useSlug,\r\n        },\r\n      },\r\n      {\r\n        name: 'fileReference',\r\n        type: 'upload',\r\n        relationTo: 'media',\r\n        required: true,\r\n        admin: {\r\n          width: '100%',\r\n          condition: (data, sibling) => sibling?.targetType === 'file',\r\n        },\r\n      },\r\n    ],\r\n  }\r\n  return linkconfig\r\n}\r\n"
  }
}
